function openMusicWindow(a,b,c,d){setcookie("mp3dlok","42","."+document.domain,144e5,!1,"/blog/music/");var e=window.open(a,b,"location=no,toolbar=no,resizable=yes,scrollbars=yes,width="+c+",height="+d);e.focus()}function openCommentsMusicWindow(a){var b=window.open(blog_spath+a+"_comment_1.html","rcommentaire","location=no,toolbar=no,resizable=yes,scrollbars=yes,width=550,height=600");b.focus()}function openCommentsMusicFormWindow(a){var b=window.open(a,"commentaire_"+blog_pseudo.replace(/-/g,"_"),"width=755,height=600,location=no,toolbar=no,resizable=yes,scrollbars=yes");b.focus()}function Player(a,b,c,d){var e=new Object,f={};e.writeDebug=function(a){typeof console!="undefined"&&console.log("writeDebug "+a)},e.onInitFail=function(){return this.onInit()},e.onInit=function(){var e=c.urls||!1;if(!a||!b||!a.parentNode||!e)return;addClass(a.parentNode,"flashloaded"),this.player=a,this.tracksData=this.playList=this.playListInit=[],this.buttons={},this.contextualData=d,this.idSkynaute=b,this.defaultTrackIndice=0,this.currentIndice=-1,this.bytesLoaded_old=-1,this.position_old=-1,this.playButton=c.playAuto||!1,this.pauseButton=!this.playButton,this.repeat=!1,this.sound=!0,this.shuffle=c.shuffle||!1,this.initTrackList(e),h(f),m(c),this.playList.length&&this.gotoTrack(this.playList[this.defaultTrackIndice],this.playButton)};var g=function(a,b,c){if(typeof b=="undefined")return{};var d=e,f=!1;for(var g in b){if(g=="url"&&!c&&!0)continue;f||(f={}),f[g]||(f[g]={});var h=b[g],i=document.getElementById(a+"-"+g);i&&(f[g].elm=i),h=="data"?f[g].data=i&&(i.firstChild||!1)?i.firstChild.data:"anonymous":f[g].data=i&&g!="url"?i.getAttribute(h)||!1:c}return f},h=function(a){if(!a)return!1;var b=e,c=document.getElementById("info_position"),d=document.getElementById("info_duration"),f=document.getElementById("info_tampon"),g=document.getElementById("timeline"),h=document.getElementById("playerslider");if(!g||!h||!c||!d||!f)return!1;g.posLeft=getLeft(g),g.onclick=function(a){return b.isPlaying&&b.setPosition(j(window.event||a,this,this.offsetWidth*1||0)),!1},b.timeline=g,b.timelineSlider=h,a.position=c,a.duration=d,a.tampon=f},i=function(a,b){if(typeof a=="undefined"||typeof b!="object"||typeof b=="undefined")return!1;var a=a;b=b;for(var c in a){var d=b[c];if(!d||!d.data)continue;var e=a[c].elm,f=a[c].type;f=="data"?(e.innerHTML="",e.appendChild(document.createTextNode(d.data))):e.setAttribute(f,d.data)}};e.setPosition=function(a){var b=e;if(!b||isNaN(a)||typeof b.duration=="undefined")return!1;typeof f!="undefined"&&r(f.position||null,setTime(this.position)),s(b.timelineSlider,a*100),getFlashObject().SetVariable("method:setPosition",Math.round(a*b.duration))};var j=function(a,b,c){if(!a||!b||typeof b.posLeft=="undefined"||isNaN(b.posLeft)||typeof c=="undefined"||isNaN(c))return!1;var d=(a.clientX-(b.posLeft||0))/c,e=.025;return d>=1-e?1:d<=e?0:d};e.setVolume=function(a,b){return typeof a=="undefined"||isNaN(a)||typeof b=="undefined"?!1:(s(b,a),getFlashObject().SetVariable("method:setVolume",a),!1)};var k=function(a,b,c){var d=e;if(!d||!a||typeof a["data-action"]=="undefined"||typeof b=="undefined")return!1;var f=a.disableElement||a;if(b){if(!a["data-action"]||hasClass(f,"disabled"))a["data-action_old"]&&(a["data-action"]=a["data-action_old"]),a["data-action_old"]=null,removeClass(f,"disabled")}else a["data-action_old"]||(a["data-action_old"]=a["data-action"],a["data-action"]=null,addClass(f,"disabled"))},l=function(a){var b=e;if(!a||typeof b=="undefined")return!1;var c=p(b.playList,b.currentIndice),d=b.repeat||!1,f=b.trackmin,g=b.trackmax;return c?(a=="next"?c=c*1+1:a=="previous"&&(c=c*1-1),d&&(c>g?c=f:c<f&&(c=g)),c):!1},m=function(){var a=e,b=document.getElementById("buttonPlay"),d=document.getElementById("buttonPause");if(!a||!b||!d)return!1;b.onclick=d.onclick=function(){return a.isPlaying?a.pause():a.play(),!1},a.buttons.playButton=b,a.buttons.pauseButton=d;var f=document.getElementById("buttonNext"),g=document.getElementById("buttonPrevious");g&&f&&(f.onclick=g.onclick=function(){var b=n(this["data-action"]);return!isNaN(b)&&typeof a.playList[b]!="undefined"&&a.gotoTrack(a.playList[b],a.isPlaying),!1},a.buttons.previous=g,a.buttons.next=f);var h=document.getElementById("buttonRepeat"),i=document.getElementById("buttonShuffle"),l=function(b){var c=b["data-action"]||b["data-action_old"];a[c]=!a[c]||c=="shuffle"&&a.trackmax==0?!0:!1,a.playList=a.shuffle?q(a.playList.slice(),a.currentIndice):a.playListInit.slice();var d=p(a.playList,a.currentIndice);k(a.buttons.previous,a.repeat?!0:d!=a.trackmin),k(a.buttons.next,a.repeat?!0:d!=a.trackmax),k(b,a[c])};h&&(h.onclick=function(){return l(this),!1},a.buttons.repeat=h),i&&(i.onclick=function(){return l(this),!1},a.buttons.shuffle=i);var m=document.getElementById("volumePlayer"),o=c.sound||{titleButtonOff:"",titleButtonOn:"",defaultVolume:100};if(m&&m.firstChild){var r=o.defaultVolume,s=m.firstChild;a.setVolume(Math.round(r),s),m.posLeft=getLeft(m),m.onclick=function(b){a.sound||(a.sound=!0,k(a.buttons.sound,a.sound));var c=(j(window.event||b,this,this.offsetWidth*1)||0)*100||0;return a.setVolume(Math.round(c),s),!1};var t=document.getElementById("buttonSound");t&&(t.onclick=function(){a.sound=!a.sound,k(this,a.sound),a.sound||(a.defaultVolume=s.offsetWidth*100/m.offsetWidth*1),this.setAttribute("title",o[a.sound?"titleButtonOn":"titleButtonOff"]);var b=a.sound?a.defaultVolume:0;return a.setVolume(b,s),!1},a.buttons.sound=t,a.buttons.sound.disableElement=t.parentNode)}for(var u in a.buttons){var v=a.buttons[u];v["data-action"]=u,v["data-action_old"]=null,k(v,a[u]||!1)}},n=function(a){var b=e;return!b||!a?!1:b.isPlaying&&setTime(b.position)!="00 : 00"&&a=="previous"?b.currentIndice:l(a)},o=function(a){if(typeof a=="undefined"||!a||!a.url||!a.url.data)return!1;(!c.playAuto||top.location==self.location)&&setcookie("mp3ok","42","."+document.domain,144e5,!1,"/music/");var b=a.url.data,d=e;if(d&&d.url!=b){d.url=b,getFlashObject().SetVariable("method:setUrl",d.url),d.position=0;if(typeof f!="undefined"){var g=setTime(0);r(f.duration||null,g),r(f.position||null,g),s(f.tampon||d.timeline,0),s(d.timelineSlider,0)}}return!0};e.play=function(){(!c.playAuto||top.location==self.location)&&setcookie("mp3ok","42","."+document.domain,144e5,!1,"/music/");var a=this.tracksData[this.currentIndice];if(typeof a=="undefined"||!a)return!1;this.tracksData[this.currentIndice].imgCount||(this.tracksData[this.currentIndice].imgCount=new Image,this.tracksData[this.currentIndice].imgCount.src=www_path+"blog/music/titrevisite.php?id="+a.id+"&id_skynaute="+this.idSkynaute),k(this.buttons.playButton,!0),k(this.buttons.pauseButton,!1),getFlashObject().SetVariable("method:play",""),getFlashObject().SetVariable("enabled","true")},e.pause=function(){k(this.buttons.playButton,!1),k(this.buttons.pauseButton,!0),getFlashObject().SetVariable("method:pause","")};var p=function(a,b){var a=a;for(var c=0,d=a.length;c<d;c++)if(a[c]==b)return c+"";return!1};e.gotoTrack=function(a,b){if(isNaN(a)||a<0)return;if(this.currentIndice!=a){var c=this.tracksData[a];if(typeof c=="undefined"||!c)return;var d=this.tracksData[this.currentIndice];typeof d!="undefined"&&removeClass(d.container,"current"),this.currentIndice=a,i(this.contextualData,c,this);var e=p(this.playList,this.currentIndice);k(this.buttons.previous,this.repeat?!0:e!=this.trackmin),k(this.buttons.next,this.repeat?!0:e!=this.trackmax),addClass(c.container,"current")}else this.setPosition(0);var f=o(this.tracksData[this.currentIndice]);if(!f)return;var b=b||!1;return b?(this.play(),!0):(k(this.buttons.playButton,!1),k(this.buttons.pauseButton,!0),!1)};var q=function(a,b){if(!a||typeof b=="undefined")return[];var a=shuffle_array(a);if(a[0]!=b){var c=p(a,b);a.splice(c,1),a.splice(0,0,b)}return a};e.onSoundComplete=function(){var a=!0,b=p(this.playList,this.currentIndice);if(!b||isNaN(b))return;var c=b*1+1;if(c>this.trackmax){if(!this.repeat){k(this.buttons.playButton,!1),k(this.buttons.pauseButton,!0);return}c=this.trackmin}this.gotoTrack(this.playList[c],a)},e.onUpdate=function(){if(this.bytesLoaded!=this.bytesLoaded_old||!!this.html5player)this.bytesLoaded_old=this.bytesLoaded,typeof f!="undefined"&&(s(f.tampon||this.timeline,this.bytesPercent*1),r(f.duration||null,setTime(this.duration)));this.position_old!=this.position&&(this.position_old=this.position,typeof f!="undefined"&&r(f.position||null,setTime(this.position)),s(this.timelineSlider,this.position*100/this.duration))};var r=function(a,b){if(!a||a.innerHTML==b)return!1;a.innerHTML=b},s=function(a,b){if(!a||a&&b==0&&a.offsetWidth*1==0||isNaN(b))return!1;a.style.width=Math.round(b*10)/10+"%"};return e.initTrackList=function(a){var b=e;if(!b||!b.player||!b.player.id)return!1;var c=b.player.getElementsByTagName("tr"),d=[],f=[],h={songName:"data",artist:"data",url:"href",albumImage:"src"};c.length||(c=["",document.getElementById("song"+b.player.id.split("audioPlayer_")[1])],h={url:"href"});for(var i=1,j=c.length;i<j;i++){var k=c[i],l=k.id,m=g(l,h,a[i-1]);if(!m)continue;m.id=l.replace("song",""),m.container=k,m.menu=new skyMenu(document.getElementById(l+"-labelMenu"),document.getElementById(l+"-menuOptions"),{container:document.getElementById("skyrockPlayerBig")||document.getElementById("skyrockPlayerPopup")}),m.imgCount=null,f.push(m);var n=f.length-1,o=typeof m["url"]!="undefined"?m.url.elm||!1:!1;o&&(o.indice=f.length-1,o.onclick=function(){return b.gotoTrack(this.indice,!0),!1}),hasClass(m.container,"current")&&(b.defaultTrackIndice=n),d.push(n)}b.tracksData=f,b.playList=b.shuffle?q(d.slice(),0):d,b.playListInit=d.slice(),b.trackmin=0,b.trackmax=b.tracksData.length-1},e}function setTime(a){if(!a)return"00 : 00";var b=a/6e4,c=Math.floor(b),d=Math.floor((b-c)*60);return c<10&&(c="0"+c),d<10&&(d="0"+d),c+" : "+d}function getFlashObject(){var a=new Object;return a.SetVariable=function(){},window.dummyMusicFlashObject=a,window.dummyMusicFlashObject}function shuffle_array(a){var b=a.length,c,d;while(b--)c=Math.floor((b+1)*Math.random()),d=a[b],a[b]=a[c],a[c]=d;return a}var skyRatingElement=function(a){if(!a)return!1;var b=a.getElementsByTagName("a");if(!b.length)return!1;var c={};c.links=b,c.rate=0,c.setRate=function(a,b){var d=c.rate;if(d==a)return!1;if(typeof a=="undefined")var b="reset";if(typeof b=="undefined")var b="read";var e=d<a&&b!="reset"?d:0,f=b!="reset"?a:d;for(var g=e,h=this.links.length;g<h;g++)g<f?addClass(this.links[g],"selected"):removeClass(this.links[g],"selected");return b=="write"&&(c.rate=a),!0};for(var d=0,e=b.length;d<e;d++){var f=b[d];hasClass(f,"selected")&&c.rate++,f.rate=d,f.otherClickEvents=f.onclick,f.onclick=function(a){return c.setRate(this.rate+1),this.otherClickEvents(window.event||a),!1},f.onmouseover=function(a){c.setRate(this.rate+1)},a.onmouseout=function(a){c.setRate()}}return c},getLeft=function(a){if(!a)return 0;var b=a.offsetLeft,c=a.offsetParent;while(c)b+=c.offsetLeft,c=c.offsetParent;return b};window.Audio&&(new Audio).canPlayType("audio/mpeg")&&onload_funcs.push(function(){var a=new Object;a.SetVariable=function(b,c){var d=a.audio;switch(b){case"method:setUrl":d.src=c,d.load();break;case"method:setPosition":try{d.currentTime=c/1e3}catch(e){}break;case"method:play":try{d.currentTime=0}catch(e){}d.play();break;case"method:pause":d.pause();break;case"method:setVolume":d.volume=c/100}},window.fakeMusicFlashObject=a,a.audio=new Audio,a.audio.onended=function(){myListener.onSoundComplete()},window.getFlashObject=function(){return window.fakeMusicFlashObject},myListener.html5player=!0,myListener.onInit(),window.setInterval(function(){var a=window,b=a.myListener,c=a.fakeMusicFlashObject.audio;b.duration=c.duration*1e3,b.position=c.currentTime*1e3,b.isPlaying=!c.paused,b.onUpdate()},250)})